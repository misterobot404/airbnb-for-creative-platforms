import{Y as L,a as M,r as o,c as q,b as s,F as k,d as T,e as t,w as a,o as d,t as O,f as V,g as E,h as I,i as $,j as N,k as Y,N as j,l as C,m as D,n as U,p as A,q as B,s as F,u as P,v as J,x as Q,y as W,Q as G,z as K}from"./vendor-f7294a46.js";const h="/build/assets/default-149ace13.svg",x=(n,e)=>{const r=n.__vccOpts||n;for(const[l,i]of e)r[l]=i;return r},X={name:"Home",components:{YandexMarker:L,YandexMap:M},data(){return{map:null,map_controls:["typeSelector","trafficControl","fullscreenControl"],map_detailed_controls:{zoomControl:{position:{right:10,top:50}}},categories:[{title:"Фото студии",icon:h},{title:"Фото стульев",icon:h},{title:"Фото столов",icon:h},{title:"Фото ложек",icon:h},{title:"Фото кружек",icon:h},{title:"Фото Саши",icon:h},{title:"Фото Маши",icon:h},{title:"Фото Миши",icon:h},{title:"Фото Семёна",icon:h},{title:"Фото Семёна",icon:h},{title:"Фото Семёна",icon:h},{title:"Фото Семёна",icon:h},{title:"Фото Семёна",icon:h}]}}},Z={class:"flex q-gutter-x-lg justify-center page-padding no-wrap overflow-auto",style:{margin:"18px"}},ee={class:"text-center"},te=["src"],se={class:"text-01"};function ne(n,e,r,l,i,_){const v=o("YandexMarker"),c=o("YandexMap");return d(),q("div",null,[s("div",Z,[(d(!0),q(k,null,T(i.categories,g=>(d(),q("div",ee,[s("img",{src:g.icon},null,8,te),s("div",se,O(g.title),1)]))),256))]),t(c,{coordinates:[55.75,37.57],zoom:11,"detailed-controls":i.map_detailed_controls,controls:i.map_controls,style:{height:"calc(100vh - 92px - 80px)"}},{default:a(()=>[t(v,{coordinates:[55.684381,37.339849]})]),_:1},8,["detailed-controls","controls"])])}const oe=x(X,[["render",ne]]),ie="/build/assets/LeshaSVO-0aa53c55.png",ae="/build/assets/site-amico-1-e372d105.svg",le="/build/assets/analysis-amico-1-3ac6e64e.svg",re={setup(){return{tab:V("profile"),text:V("Александр"),date:V(""),phone:V("+7"),mail:V(""),about:V("")}},name:"Home"},ce={class:"row"},ue={class:"col-12"},_e={class:"q-gutter-y-md",style:{width:"fit-content"}},de={class:"row q-mt-md"},pe={class:"col-3 col-6-md col-12-sm flex column items-center"},me=s("img",{src:ie,alt:"Аватарка",style:{width:"fit-content"}},null,-1),ge={class:"col-4"},fe={class:"column"},he=s("span",{class:"text-m-b text-01"},"Имя по документам",-1),qe=s("span",{class:"text-xs text-02"},"Имя здесь должно совпадать с именем в вашем паспорте",-1),xe={class:"column q-mt-lg"},ve=s("span",{class:"text-m-b text-01"},"Документ подтверждающий личность",-1),ye=s("span",{class:"text-xs text-02"},"Удостоверение личности государственного образца",-1),be={class:"column q-mt-lg"},we=s("span",{class:"text-m-b text-01"},"Дата рождения",-1),Se=s("span",{class:"text-xs text-02"},"Пользоваться сервисом могут лица, старше 18 лет",-1),$e={class:"column q-mt-lg"},Ve=s("span",{class:"text-m-b text-01"},"Номер телефона",-1),Ee=s("span",{class:"text-xs text-02"},"Для связи с CreativeHub и гостями по подтверждённым бронированиям",-1),Re={class:"column q-mt-lg"},Ue=s("span",{class:"text-m-b text-01"},"Электронная почта",-1),ke=s("span",{class:"text-xs text-02"},"Для связи с CreativeHub и гостями по подтверждённым бронированиям",-1),Oe={class:"column q-mt-lg"},Ae=s("span",{class:"text-m-b text-01"},"Информация о себе",-1),Te=s("span",{class:"text-xs text-02"},"Расскажите своим гостям и арендодателям о себе",-1),je=s("div",{class:"col-4 col-12-md col-12-sm flex column items-center flex-start"},[s("div",{class:"info-card"},[s("img",{src:ae}),s("span",{class:"text-m-b text-01"},"Зачем вносить ваши данные?"),s("span",{class:"text-s text-01"},"Для заключения договоров на площадке CreativeHub необходимо подтвердить вашу личность. Мы храним все персональные данные в соответствии с ФЗ-152 “О персональных данных”.")]),s("div",{class:"info-card q-mt-lg"},[s("img",{src:le}),s("span",{class:"text-m-b text-01"},"Зачем вносить ваши данные?"),s("span",{class:"text-s text-01"},"Для заключения договоров на площадке CreativeHub необходимо подтвердить вашу личность. Мы храним все персональные данные в соответствии с ФЗ-152 “О персональных данных”.")])],-1);function Ce(n,e,r,l,i,_){const v=o("q-tab"),c=o("q-route-tab"),g=o("q-tabs"),y=o("q-btn"),p=o("q-input"),f=o("q-page-container"),b=o("q-layout");return d(),E(b,null,{default:a(()=>[t(f,null,{default:a(()=>[s("div",ce,[s("div",ue,[s("div",_e,[t(g,{modelValue:l.tab,"onUpdate:modelValue":e[0]||(e[0]=m=>l.tab=m),class:"text-01 text-m","indicator-color":"primary"},{default:a(()=>[t(v,{name:"profile",label:"Мой профиль"}),t(c,{name:"security",to:"/account_security",label:"Безопасность"}),t(c,{name:"payments",label:"Платежи"}),t(c,{name:"notifications",label:"Уведомления"})]),_:1},8,["modelValue"])])])]),s("div",de,[s("div",pe,[me,t(y,{class:"self-center secondary link",label:"Загрузить фото",unelevated:"","no-caps":""})]),s("div",ge,[s("div",fe,[he,qe,t(p,{outlined:"",modelValue:l.text,"onUpdate:modelValue":e[1]||(e[1]=m=>l.text=m),readonly:"",class:"base-03"},null,8,["modelValue"])]),s("div",xe,[ve,ye,t(y,{label:"Загрузить документ",class:"link q-mt-sm",style:{width:"fit-content"},outline:"",unelevated:"","no-caps":""})]),s("div",be,[we,Se,t(p,{outlined:"",modelValue:l.date,"onUpdate:modelValue":e[2]||(e[2]=m=>l.date=m),type:"date"},null,8,["modelValue"])]),s("div",$e,[Ve,Ee,t(p,{mask:"+7(###)###-##-##","fill-mask":"_",outlined:"",modelValue:l.phone,"onUpdate:modelValue":e[3]||(e[3]=m=>l.phone=m)},null,8,["modelValue"]),t(y,{label:"Добавить другой номер",class:"link text-s-b",style:{width:"fit-content"},flat:"","no-caps":""})]),s("div",Re,[Ue,ke,t(p,{outlined:"",modelValue:l.mail,"onUpdate:modelValue":e[4]||(e[4]=m=>l.mail=m)},null,8,["modelValue"])]),s("div",Oe,[Ae,Te,t(p,{outlined:"",modelValue:l.about,"onUpdate:modelValue":e[5]||(e[5]=m=>l.about=m),type:"textarea"},null,8,["modelValue"])])]),je])]),_:1})]),_:1})}const De=x(re,[["render",Ce]]),ze={name:"PageNotFound"};function He(n,e,r,l,i,_){return d(),q("div",null," Страница не найдена ")}const Le=x(ze,[["render",He]]),Me={name:"LeaseHistory"};function Ie(n,e,r,l,i,_){return d(),q("div",null," История аренды ")}const Ne=x(Me,[["render",Ie]]),Ye={name:"LeaseObject"};function Be(n,e,r,l,i,_){return d(),q("div",null," Сдать объект в аренду ")}const Fe=x(Ye,[["render",Be]]),Pe={name:"Helps"};function Je(n,e,r,l,i,_){return d(),q("div",null," Помощь ")}const Qe=x(Pe,[["render",Je]]),We={name:"FavoriteObjects"};function Ge(n,e,r,l,i,_){return d(),q("div",null," Избранные объекты ")}const Ke=x(We,[["render",Ge]]),Xe={name:"MyObjects"};function Ze(n,e,r,l,i,_){return d(),q("div",null," Мои объекты ")}const et=x(Xe,[["render",Ze]]),tt=[{path:"/",component:oe,meta:{requiresAuth:!1}},{path:"/help",component:Qe,meta:{requiresAuth:!1}},{path:"/:pathMatch(.*)*",component:Le,meta:{requiresAuth:!1}},{path:"/account",component:De,meta:{requiresAuth:!0}},{path:"/favorite_objects",component:Ke,meta:{requiresAuth:!0}},{path:"/lease_object",component:Fe,meta:{requiresAuth:!0}},{path:"/lease_history",component:Ne,meta:{requiresAuth:!0}},{path:"/my_objects",component:et,meta:{requiresAuth:!0}}],R=I("user",{state:()=>({user:JSON.parse(window.localStorage.getItem("user")),token:window.localStorage.getItem("token"),show_signin_dialog:!1,show_signup_dialog:!1}),actions:{signup(n,e,r){return $.post("/api/register",{name:n,email:e,password:r})},signin(n,e){return $.post("/api/login",{email:n,password:e}).then(r=>this.setAuth(r.data.data.token,r.data.data.user))},logout(){return $.post("/api/logout").then(()=>this.removeAuth())},setAuth(n,e){this.user=e,this.token=n,$.defaults.headers.common.Authorization="Bearer "+n,window.localStorage.setItem("token",n),window.localStorage.setItem("user",JSON.stringify(e))},removeAuth(){this.token=null,this.user=null,window.localStorage.removeItem("token"),window.localStorage.removeItem("user"),delete $.defaults.headers.common.Authorization}}}),z=N({history:Y(),routes:tt});z.beforeEach(async(n,e,r)=>{const l=R();n.meta.requiresAuth&&!l.token?(l.show_signin=!0,j.create({icon:"info",message:"Для продолжения необходимо авторизоваться"}),e.meta.requiresAuth===!1?r(!1):r("/")):r()});const st={name:"SigninDialog",data(){return{USER_STORE:R(),signin_email:null,signin_password:null,signin_loading:!1}},computed:{show_signin:{get(){return this.USER_STORE.show_signin_dialog},set(n){this.USER_STORE.show_signin_dialog=n}}},methods:{async signin(){return this.signin_loading=!0,this.USER_STORE.signin(this.signin_email,this.signin_password).then(()=>{this.$q.notify({type:"positive",message:"Авторизация выполнена"}),this.USER_STORE.show_signin_dialog=!1}).catch(n=>{(n.status=403)?this.$q.notify({type:"negative",message:"Неверные данные учётной записи"}):this.$q.notify({type:"negative",message:"Ошибка сервера"})}).finally(()=>this.signin_loading=!1)},showSignupDialog(){this.USER_STORE.show_signup_dialog=!0}}},nt=s("div",{class:"text-h6"},"Авторизация",-1);function ot(n,e,r,l,i,_){const v=o("q-space"),c=o("q-btn"),g=o("q-card-section"),y=o("q-separator"),p=o("q-icon"),f=o("q-input"),b=o("q-card"),m=o("q-dialog"),w=C("close-popup");return d(),E(m,{modelValue:_.show_signin,"onUpdate:modelValue":e[4]||(e[4]=u=>_.show_signin=u),persistent:""},{default:a(()=>[t(b,null,{default:a(()=>[s("form",{onSubmit:e[3]||(e[3]=D(u=>_.signin(),["prevent"]))},[t(g,{class:"row items-center"},{default:a(()=>[nt,t(v),U(t(c,{icon:"close",flat:"",round:"",dense:""},null,512),[[w]])]),_:1}),t(y),t(g,{class:"q-gutter-y-md"},{default:a(()=>[t(f,{modelValue:i.signin_email,"onUpdate:modelValue":e[0]||(e[0]=u=>i.signin_email=u),label:"Введите электронную почту",filled:"",type:"email",required:""},{prepend:a(()=>[t(p,{name:"email"})]),_:1},8,["modelValue"]),t(f,{modelValue:i.signin_password,"onUpdate:modelValue":e[1]||(e[1]=u=>i.signin_password=u),label:"Введите пароль",filled:"",type:"password",required:""},{prepend:a(()=>[t(p,{name:"password"})]),_:1},8,["modelValue"])]),_:1}),t(y),t(g,{class:"flex justify-end q-gutter-x-xs"},{default:a(()=>[U(t(c,{onClick:e[2]||(e[2]=u=>_.showSignupDialog()),flat:"",label:"Регистрация",color:"primary"},null,512),[[w]]),t(c,{label:"Подтвердить",color:"primary",type:"submit",loading:i.signin_loading},null,8,["loading"])]),_:1})],32)]),_:1})]),_:1},8,["modelValue"])}const it=x(st,[["render",ot]]),at={name:"SignupDialog",data(){return{USER_STORE:R(),signup_name:null,signup_email:null,signup_password:null,signup_confirm_password:null,signup_loading:!1}},computed:{show_signup:{get(){return this.USER_STORE.show_signup_dialog},set(n){this.USER_STORE.show_signup_dialog=n}}},methods:{signup(){if(this.signup_password.length<6){this.$q.notify({type:"negative",message:"Длина пароля менее 6 символов"});return}if(this.signup_password!==this.signup_confirm_password){this.$q.notify({type:"negative",message:"Пароли не совпадают"});return}this.signup_loading=!0,this.USER_STORE.signup(this.signup_name,this.signup_email,this.signup_password).then(()=>{this.USER_STORE.signin(this.signup_email,this.signup_password).then(()=>{this.$q.notify({type:"positive",message:"Регистрация выполнена"}),this.USER_STORE.show_signup_dialog=!1})}).catch(n=>{(n.status=422)?this.$q.notify({type:"negative",message:"Такая почта уже зарегистрирована"}):this.$q.notify({type:"negative",message:"Ошибка сервера"})}).finally(()=>this.signup_loading=!1)},showSigninDialog(){this.USER_STORE.show_signin_dialog=!0}}},lt=s("div",{class:"text-h6"},"Регистрация",-1);function rt(n,e,r,l,i,_){const v=o("q-space"),c=o("q-btn"),g=o("q-card-section"),y=o("q-separator"),p=o("q-icon"),f=o("q-input"),b=o("q-card"),m=o("q-dialog"),w=C("close-popup");return d(),E(m,{modelValue:_.show_signup,"onUpdate:modelValue":e[6]||(e[6]=u=>_.show_signup=u),persistent:""},{default:a(()=>[t(b,null,{default:a(()=>[s("form",{onSubmit:e[5]||(e[5]=D(u=>_.signup(),["prevent"]))},[t(g,{class:"row items-center"},{default:a(()=>[lt,t(v),U(t(c,{icon:"close",flat:"",round:"",dense:""},null,512),[[w]])]),_:1}),t(y),t(g,{class:"q-gutter-y-md"},{default:a(()=>[t(f,{modelValue:i.signup_name,"onUpdate:modelValue":e[0]||(e[0]=u=>i.signup_name=u),label:"Введите имя",filled:"",required:""},{prepend:a(()=>[t(p,{name:"face"})]),_:1},8,["modelValue"]),t(f,{modelValue:i.signup_email,"onUpdate:modelValue":e[1]||(e[1]=u=>i.signup_email=u),label:"Введите электронную почту",filled:"",type:"email",required:""},{prepend:a(()=>[t(p,{name:"email"})]),_:1},8,["modelValue"]),t(f,{modelValue:i.signup_password,"onUpdate:modelValue":e[2]||(e[2]=u=>i.signup_password=u),label:"Введите пароль",filled:"",type:"password",required:"",minlength:"6"},{prepend:a(()=>[t(p,{name:"password"})]),_:1},8,["modelValue"]),t(f,{modelValue:i.signup_confirm_password,"onUpdate:modelValue":e[3]||(e[3]=u=>i.signup_confirm_password=u),label:"Повторите пароль",filled:"",type:"password",required:"",minlength:"6"},{prepend:a(()=>[t(p,{name:"password"})]),_:1},8,["modelValue"])]),_:1}),t(y),t(g,{class:"flex justify-end q-gutter-x-xs"},{default:a(()=>[U(t(c,{onClick:e[4]||(e[4]=u=>_.showSigninDialog()),flat:"",label:"Авторизация",color:"primary"},null,512),[[w]]),t(c,{label:"Подтвердить",color:"primary",type:"submit",loading:i.signup_loading},null,8,["loading"])]),_:1})],32)]),_:1})]),_:1},8,["modelValue"])}const ct=x(at,[["render",rt]]),ut="/build/assets/logo-de7e11a1.png";const _t={name:"Layout",components:{SignupDialog:ct,SigninDialog:it},data(){return{USER_STORE:R(),active:"guide",search:"",user_panel_links:[{title:"Аккаунт",to:"/account"},{title:"История аренды",to:"/lease_history"},{title:"Мои объекты",to:"/my_objects"},{title:"Избранное",to:"/favorite_objects"},{title:"Помощь",to:"/help"}]}},methods:{logout(){this.USER_STORE.logout().then(()=>{this.$q.notify({type:"positive",message:"Вы вышли из своей учётной записи"}),this.$route.meta.requiresAuth&&this.$router.push("/")})}}},dt=n=>(P("data-v-5ea4ad6f"),n=n(),J(),n),pt={class:"flex justify-between items-center page-padding no-wrap border-radius-lg",style:{margin:"10px 0"}},mt=dt(()=>s("img",{src:ut,style:{height:"58px"}},null,-1)),gt={class:"flex-grow-1 flex justify-center"},ft={class:"flex"},ht={class:"user-panel"};function qt(n,e,r,l,i,_){const v=o("router-link"),c=o("q-icon"),g=o("q-input"),y=o("q-btn"),p=o("q-item-section"),f=o("q-item"),b=o("q-list"),m=o("q-menu"),w=o("q-separator"),u=o("SigninDialog"),H=o("SignupDialog");return d(),q("div",null,[s("header",null,[s("div",pt,[s("div",null,[t(v,{to:"/"},{default:a(()=>[mt]),_:1})]),s("div",gt,[t(g,{outlined:"",modelValue:i.search,"onUpdate:modelValue":e[0]||(e[0]=S=>i.search=S),placeholder:"Найдите площадку мечты",dense:"",style:{"max-width":"500px"},class:"flex-grow-1"},{prepend:a(()=>[t(c,{name:"search"})]),_:1},8,["modelValue"])]),s("div",ft,[t(y,{label:"Сдать в аренду",flat:"","no-caps":"",class:"self-center btn-p-sm",style:{height:"40px","margin-right":"12px"},to:"/lease_object"}),s("div",null,[i.USER_STORE.user?(d(),q(k,{key:0},[s("div",ht,[t(c,{name:"menu",size:"24px"}),t(c,{name:"o_account_circle",size:"24px",class:"q-ml-sm q-mr-xs"}),s("span",null,O(i.USER_STORE.user.name),1)]),t(m,{"auto-close":"",fit:"",offset:[0,4]},{default:a(()=>[t(b,null,{default:a(()=>[i.USER_STORE.user.is_admin?(d(),E(f,{key:0,clickable:"",onClick:e[1]||(e[1]=S=>n.$router.push("/admin_panel"))},{default:a(()=>[t(p,{class:"text-size-sm"},{default:a(()=>[A("Панель администратора")]),_:1})]),_:1})):B("",!0),(d(!0),q(k,null,T(i.user_panel_links,S=>(d(),E(f,{to:S.to,clickable:""},{default:a(()=>[t(p,{class:"text-size-sm",textContent:O(S.title)},null,8,["textContent"])]),_:2},1032,["to"]))),256)),t(f,{clickable:"",onClick:e[2]||(e[2]=S=>_.logout())},{default:a(()=>[t(p,{class:"text-size-sm"},{default:a(()=>[A("Выйти")]),_:1})]),_:1})]),_:1})]),_:1})],64)):(d(),q("div",{key:1,class:"user-panel",onClick:e[3]||(e[3]=S=>i.USER_STORE.show_signin_dialog=!0)},[t(c,{name:"menu",size:"24px",class:"q-mr-sm"}),t(c,{name:"o_account_circle",size:"24px"})]))])])]),t(w)]),s("main",null,[F(n.$slots,"default",{},void 0,!0)]),t(u),t(H)])}const xt=x(_t,[["render",qt],["__scopeId","data-v-5ea4ad6f"]]),vt={name:"App",components:{Layout:xt},beforeMount(){R().token&&($.defaults.headers.common.Authorization="Bearer "+this.token)}};function yt(n,e,r,l,i,_){const v=o("router-view"),c=o("Layout");return d(),E(c,null,{default:a(()=>[t(v)]),_:1})}const bt=x(vt,[["render",yt]]);Q(bt).use(z).use(W()).use(G,{lang:K,plugins:{Notify:j}}).mount("#app");$.interceptors.response.use(n=>n,n=>{if(n.response.status===401)R().removeAuth();else return Promise.reject(n)});
